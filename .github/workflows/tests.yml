name: ðŸŽ­ Tests
on:
  push:
    paths-ignore:
      - .chglog/**
      - .github/**
      - '!.github/workflows/tests.yml'
      - public/**
      - .editorconfig
      - .gitattributes
      - .gitignore
      - .htaccess
      - CHANGELOG.md
      - code-of-conduct.md
      - CONTRIBUTING.md
      - LICENSE.md
      - README.md
jobs:
  # ----------------------
  #   Silverstipe / PHP
  # ----------------------
  silverstripe:
    name: Silverstripe Testsuite
    uses: syntro-opensource/workflows/.github/workflows/silverstripe.yml@master
    with:
      phpunit: true
      phpunit_suite: app/tests/
      # phpunit_config_file:
      phpunit_php_version: '7.4'
      phpstan: true
      phpstan_dir: app/src/
      phpstan_php_version: '7.4'
      phpcs: true
      phpcs_dir: app/
      # behat: false
      # behat_php_version: '7.4'
  # ----------------------
  #   Client
  # ----------------------
  eslint-client:
    name: ðŸ”® ESLint - Client Global JS
    uses: syntro-opensource/workflows/.github/workflows/js-eslint.yml@master
    with:
      dir: app/client/src/global/
      configfile: app/client/src/global/.eslintrc
  stylelint-client:
    name: ðŸ”® Stylelint - Client SCSS
    uses: syntro-opensource/workflows/.github/workflows/scss-stylelint.yml@master
    with:
      glob: app/client/src/**/*.scss
